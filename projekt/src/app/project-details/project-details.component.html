

<ng-container *ngIf="projekt">


<div *ngIf="!add" class="container">


 <!--  <div class="progress">
    <div class="progress-bar bg-success" role="progressbar" style="width:{{percent}}%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">{{percent}}% erledigt</div>
  </div> -->

  <div class="row head">
    <div class="col-sm-8"> 
      <label for="name">Projekt:</label> 
      <h1 id="name">{{projekt.name}}</h1>  
      <label for="bez">Bezeichnung:</label> 
      <h2 id="bez">{{projekt.bezeichnung}}</h2>
    </div>

  
    <div class="form-group col-md-4">
      <label for="inputState">  
        <p *ngIf="projekt.erledigt == 0">Projekt Abgeschlossen</p>
        <p *ngIf="projekt.erledigt == 1">Projekt in Bearbeitung</p>
        <p *ngIf="projekt.erledigt == 2">Projekt pausiert</p>
        <p *ngIf="projekt.erledigt == 3">allgemeiner Fehler</p>
        <p *ngIf="projekt.erledigt == 4">Zeitüberschreitung</p></label> 

      <select id="inputState" class="form-control" #inputState (change)="changeState(inputState.value)">
        <option selected>Status ändern</option>
        <option [value]="0">Projekt Abgeschlossen</option>
        <option [value]="1">Projekt in Bearbeitung</option>
        <option [value]="2">Projekt pausiert</option>
        <option [value]="3">allgemeiner Fehler</option>
        <option [value]="4">Zeitüberschreitung</option>
      </select>
    </div>
    

  </div>


  <div class="container" style="margin-top: 5rem;">
    <ng-container *ngIf="aufgaben$ | async as aufgabe">
    <app-project-details-item  @fadeInAnimation *ngFor="let a of aufgabe;"  [index]="index"  [aufgabe]="a">"> 
    </app-project-details-item>
</ng-container> 

<button type="button" class="de-bu btn btn-secondary" >Abbrechen</button> 
<button type="button" class="bu btn btn-secondary">Seichern</button> 
<button type="button" class="bu btn btn-secondary" (click)="add=true">Aufgabe hinzufügen</button> 

  </div>

</div>
</ng-container>

<div class="container">
  <div *ngIf="add">
    <h1>Neue Aufgabe für {{projekt.name}} anlegen</h1>
    <form #projektForm="ngForm" (ngSubmit)="submitForm()">

      <div class="form-group">
          <label for="name">Titel</label>
          <input type="text" class="form-control" id="name" required [(ngModel)]="neueAufgabe.titel" name="name"
          #name="ngModel">
   
          <label for="beschreibung">Beschreibung</label>
          <textarea type="text" class="form-control" id="bezeichnung" required [(ngModel)]="neueAufgabe.beschreibung" name="beschreibung"
          #beschreibung="ngModel" rows="5"></textarea>

          <label for="sollZeit">Sollzeit</label>      <br/>
          <input type="number" id="time" required [(ngModel)]="neueAufgabe.sollZeit" name="sollZeit"
          #sollZeit=ngModel>
          <br/>
          <label for="date">Deadline</label> <br/>
<!--           <input type="date" id="date" required [(ngModel)]="neueAufgabe.deadline" name="deadline" #deadline=ngModel>
 -->          <input type="date" id="time" required [(ngModel)]="neueAufgabe.deadline" name="deadline" #deadline=ngModel>
          <br/>
          <ng-container *ngIf="user">
            <label for="userDropdown">Aufgabe zuweisen</label>
            <select class="form-control" id="userDropdown" #userDropdown (change)="changeUser(userDropdown.value)">
                <option *ngFor="let u of user" [value]="u.nutzerId">{{ u.nachname + ", " +u.vorname}}</option>
            </select>
        </ng-container>

      </div>
      <button type="submit" class="btn btn-success" [disabled]="!projektForm.valid">Speichern</button>
  </form>
  </div>
</div>

